<!DOCTYPE html>
<html>

<head>
  <title>LightYear Industries</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  <link rel="icon" type="image/x-icon" href="images/titleicon.png" />
  <meta name="viewport" content="user-scalable=no">
</head>

<body class="Body" style="  padding-top: 150px;padding-left: 50px;padding-right: 50px;padding-bottom: 50px;">

  <div class="TopRibbon">    
    <div><a href="index.html"><img class = "TopRibbonLogo" src="images/LYI500x380.png"></a></div>
    <div><a class="TopRibbonText" href="index.html">Home</a></div>
    <div><a class="TopRibbonText" href="shop.html">Shop</a></div>
    <div><a class="TopRibbonText" href="career.html">Career</a></div>
    <div><a class="TopRibbonText" href="contact.html">Contact</a></div>
    <div><a class="TopRibbonText" href="user.html">Login</a></div>
    <div><a class="TopRibbonText" href="cart.html" style=" position: relative;"><div class="TopRibbonTextCartQuantity"></div><span class="material-symbols-outlined" style="width: 100px; font-size: 50px; z-index: 1001;">shopping_cart</span></a></div>
  </div>

  <div id="login" style="display: flex; justify-content: center;">
    <div style="
      display: flex; 
      flex-direction: column ;
      background-color: rgb(218, 218, 218); 
      max-width: 300px;
      border-radius: 20px;
      padding: 20px;">
      <div style="display: flex; justify-content: center; padding: 20px; font-size: 30px;">User Login</div>
      <div style="
        padding: 20px;
        display: grid;
        grid-template-columns: 50px 300px;
        row-gap: 20px;
        column-gap: 20px;
        font-size: 20px;">
        <div style="display: flex; align-items: center;">Phone</div>
        <div><input type="text" id="user-phone" style="height: 20px;"></div>
        <div style="display: flex; align-items: center;">OTP</div>
        <div><input type="password" id="user-password"  style="height: 20px;"></div>
      </div>
      <div style="display: flex; justify-content: center; padding-top: 20px;">
        <button style="
          width: 200px; 
          height: 30px; 
          font-size: 20px; 
          background-color: rgb(0, 0, 0); 
          color: white; 
          border: none; 
          border-radius: 10px;"
          onclick="Login();">
          Login
        </button>
      </div>
    </div>
  </div>

  <div id="user" style="
  display: none;
  grid-template-columns: 1fr 100px;
  margin-top: -150px;
  margin-left: -50px;
  margin-right: -50px;  
  background-color: azure;
  font-size: 20px;
  padding:40px;
  padding-top: 100px;">
    <div>Hi,&nbsp<span id="user-name">User</span></div>
    <button style="    
    width: 100px; 
    height: 30px; 
    font-size: 20px; 
    background-color: rgb(0, 0, 0); 
    color: white; 
    border: none; 
    border-radius: 10px;"
    onclick="Logout();">
    Logout
    </button>
  </div>

</body>

<style>
</style>
</html>

<script src="script.js"></script>
<script>
function Login()
{
  var phone = document.getElementById("user-phone").value;
  var password = document.getElementById("user-password").value;
  user.status = undefined;
  user.LogIn(phone,password);
  WaitForLogin();
}
function Logout()
{
  user.LogOut();
  WaitForLogin();
}
if(localStorage.getItem('user') != undefined)
{
  document.getElementById("user-phone").value = JSON.parse(localStorage.getItem('user')).phone;
  document.getElementById("user-password").value = JSON.parse(localStorage.getItem('user')).password;
}

WaitForLogin();
function WaitForLogin()
{
  if(user.status == undefined)
  {
    setTimeout(WaitForLogin, 100);
  }
  else
  {
    if(user.status == 1)
    {    
      document.getElementById("login").style.display = "none";
      document.getElementById("user").style.display = "grid";
      document.getElementById("user-name").innerHTML = user.name;
    }
    else
    {
      document.getElementById("login").style.display = "grid";
      document.getElementById("user").style.display = "none";
    }
  }
}
</script>
