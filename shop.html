<!DOCTYPE html>
<html>

<head>
  <title>LightYear Industries</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0&icon_names=shopping_cart" />
  <link rel="icon" type="image/x-icon" href="images/titleicon.png" />
  <meta name="viewport" content="user-scalable=no">
</head>

<body class="Body">

  <div class="TopRibbon">    
    <a href=""><img src="images/LYI 500x380.png" style = "width: 250px; height: 100px; object-fit: cover;"></a>
    <div><a class="TopRibbonText" href="index.html">Home</a></div>
    <div><a class="TopRibbonText" href="shop.html">Shop</a></div>
    <div><a class="TopRibbonText" href="career.html">Career</a></div>
    <div><a class="TopRibbonText" href="contact.html">Contact Us</a></div>
    <div><a class="TopRibbonText" href="cart.html"><span class="material-symbols-outlined" style="width: 100px; font-size: 50px;">shopping_cart</span></a></div>
  </div>

  <div class="shop-menu">

  </div>
</body>

<script>
  const url = new URLSearchParams(window.location.search);
  if(url.size == 0)
  {
    document.querySelector(".shop-menu").innerHTML = `
    <!--
    <div class="shop-menu-items">
      <a href="shop-cnc-manufacturing.html"><img class="shop-menu-items-img" src="images/CNC Manufacturing.jpg"></a><br>
      <h2>CNC Manufacturing</h2>
    </div>
    -->
    <div class="shop-menu-items">
      <a href="shop.html?category=doors"><img class="shop-menu-items-img" src="images/door.JPG"></a><br>
      <h2>Doors</h2>
    </div>
    <div class="shop-menu-items">
      <a href="shop.html?category=mandir"><img class="shop-menu-items-img" src="images/Mandir.JPG"></a><br>
      <h2>Mandir</h2>
    </div>    
    <div class="shop-menu-items">
      <a href="shop.html?category=customised_partition"><img class="shop-menu-items-img" src="images/Jali.JPG"></a><br>
      <h2>Customised Decorative Jali</h2>
    </div>    
        <div class="shop-menu-items">
      <a href="shop.html?category=customised_mandircentre"><img class="shop-menu-items-img" src="images/IMG_1216.jpg"></a><br>
      <h2>Customised Mandir Centre</h2>
    </div>    
    `;
  }
  else
  {
    var catalogue = undefined;
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "Catalogue.json", false);
    xhr.onload = function (oEvent)
    {
      catalogue = JSON.parse(xhr.responseText);
      const category = url.get('category');
      if(category == 'doors')
      {
        catalogue = catalogue.catalogue_door;
        for(var i=0;i<Object.keys(catalogue).length;i++)
        {
          document.querySelector(".shop-menu").innerHTML += `
            <div class="shop-menu-items">
              <a href="shop.html?category=doors"><img class="shop-menu-items-img" src="`+catalogue[i].thumbnailurl+`"></a><br>
              <h2>`+catalogue[i].name+`</h2>
            </div>
            `;
        }
      }
      if(category == 'mandir')
      {
        catalogue = catalogue.catalogue_mandir;
        for(var i=0;i<Object.keys(catalogue).length;i++)
        {
          document.querySelector(".shop-menu").innerHTML += `
            <div class="shop-menu-items">
              <a href="shop.html?category=doors"><img class="shop-menu-items-img" src="`+catalogue[i].thumbnailurl+`"></a><br>
              <h2>`+catalogue[i].name+`</h2>
            </div>
            `;
        }
      }
      if(category == 'customised_partition')
      {
        catalogue = catalogue.catalogue_customised_decorative_jali;
        document.querySelector(".shop-menu").innerHTML = `
        <div class="shop-menu-items">
          <a href="shop-customised.html?category=Partition&design=BlankDesign"><img class="shop-menu-items-img" src="images/BlackDesign.png"></a><br>
          <h2>Blank Design</h2>
        </div>
        `;
        for(var i=0;i<Object.keys(catalogue).length;i++)
        {
          document.querySelector(".shop-menu").innerHTML += `
            <div class="shop-menu-items">
              <a href="shop-customised.html?category=Partition&design=`+catalogue[i].name+`"><img class="shop-menu-items-img" src="`+catalogue[i].thumbnailurl+`"></a><br>
              <h2>`+catalogue[i].name+`</h2>
            </div>
            `;
        }
      }
      if(category == 'customised_mandircentre')
      {
        catalogue = catalogue.catalogue_customised_mandir_centre;
        document.querySelector(".shop-menu").innerHTML = `
        <div class="shop-menu-items">
          <a href="shop-customised.html?category=Mandir&design=BlankDesign"><img class="shop-menu-items-img" src="images/BlackDesign.png"></a><br>
          <h2>Blank Design</h2>
        </div>
        `;
        for(var i=0;i<Object.keys(catalogue).length;i++)
        {
          document.querySelector(".shop-menu").innerHTML += `
            <div class="shop-menu-items">
              <a href="shop-customised.html?category=Mandir&design=`+catalogue[i].name+`"><img class="shop-menu-items-img" src="`+catalogue[i].thumbnailurl+`"></a><br>
              <h2>`+catalogue[i].name+`</h2>
            </div>
            `;
        }
      }
    };
    xhr.send();
  }

</script>
</html>
<script>
class Item
{
  constructor(name, price, quantity)
  {
    this.name = name;
    this.price = price;
    this.quantity = quantity;
    this.manufacutringspecifications = undefined;
  }
}
class Cart
{
  constructor()
  {
    this.items = [];
  }
  Count()
  {
    return this.items.length;
  }
  Add(item)
  {
    var found = false;
    for(var i=0;i<this.items.length;i++)
    {
      if(this.items[i].name == item.name)
      {
        this.items[i].quantity += item.quantity;
        found = true;
        break;
      }
    }
    if(!found)
    {
      this.items.push(item);
    }
  }
  Remove(item)
  {
    for(var i=0;i<this.items.length;i++)
    {
      if(this.items[i].name == item.name)
      {
        this.items.splice(i, 1);
        break;
      }
    }
  }
  Get(index)
  {
    return this.items[index];
  }
  Total()
  {
    var total = 0;
    for(var i=0;i<this.items.length;i++)
    {
      total += this.items[i].price;
    }
    return total;
  }

};
var cart;
cart = JSON.parse(localStorage.getItem('cart'));
if(cart == null)
{
  cart = new Cart();
}
</script>
